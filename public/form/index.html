<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TrackLab 角色属性更新及升级</title>
  <link rel="stylesheet" href="/public/ui.css?v=20260206a" />
</head>
<body>
  <div class="wrap">

    <div class="card">
      <h2>TrackLab 角色属性更新及升级</h2>
      <div class="sub">声明：本页仅用于角色属性更新及角色升级后的表单填写。</div>
    </div>

    <div class="card">
      <div class="grid3">
        <div>
          <label>接口地址</label>
          <input id="apiBase" type="text" readonly />
        </div>
        <div>
          <label>发布平台</label>
          <select id="packId"></select>
        </div>
        <div>
          <label>版本号</label>
          <select id="packVersion"></select>
        </div>
      </div>
      <div id="status" class="status" style="margin-top:10px;"></div>
    </div>

    <div class="card">
      <div class="blocktitle">一、选择账号</div>
      <div class="grid2">
        <div>
          <label>用户名</label>
          <select id="ownerId"></select>
        </div>
        <div>
          <label>账号</label>
          <select id="accountSelect"></select>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="blocktitle">二、选择角色</div>
      <div class="grid3">
        <div>
          <label>选择角色范围</label>
          <select id="onlyEnabled">
            <option value="1" selected>仅有效角色</option>
            <option value="">全部角色（含淘汰）</option>
          </select>
          <div class="stagehint">淘汰角色仅用于回看，不参与生成/提交。</div>
        </div>
        <div>
          <label>按账号级别查看</label>
          <select id="stageFilter">
            <option value="">全部级别</option>
            <option value="S0">S0</option>
            <option value="S1">S1</option>
            <option value="S2">S2</option>
            <option value="S3">S3</option>
          </select>
        </div>
        <div>
          <label>角色</label>
          <select id="presetSelect"></select>
        </div>
      </div>

      <div class="grid3" style="display:none;">
        <div>
          <label>当前 preset_id（只读）</label>
          <input id="presetId" type="text" readonly />
        </div>
        <div>
          <label>当前 stage（只读）</label>
          <input id="presetStage" type="text" readonly />
        </div>
        <div>
          <label>enabled（只读）</label>
          <input id="presetEnabled" type="text" readonly />
        </div>
      </div>
    </div>

    <div class="card">
      <div class="blocktitle">三、表单填写</div>
      <div class="sub">此处将显示当前及之前所有阶段的表单内容；仅当前阶段可进行填写；后续阶段不进行展示。</div>
      <div class="sep"></div>

      <div id="formContainer"></div>

      <div class="row" style="margin-top:12px;">
        <button id="btnSave" class="btn primary" disabled>更新并保存新表单</button>
      </div>
    </div>

    <div class="card">
      <div class="blocktitle">脚本预览（不可修改）</div>
      <pre id="debugPrompt"></pre>
    </div>
  </div>

  <script src="./form.js?v=20260205_04"></script>
</body>
</html>
