<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TrackLab 表单平台</title>
  <link rel="stylesheet" href="../ui.css?v=ui_v1" />
</head>
<body>
  <div class="ui-wrap">

    <div class="ui-card">
      <h2 class="ui-title">TrackLab 表单平台</h2>
      <div class="ui-sub">选择账号与角色后，仅当前阶段字段可编辑。</div>
      <div id="js-schema-hint" class="ui-sub"></div>
    </div>

    <div class="ui-card">
      <div class="ui-grid-3">
        <div>
          <label class="ui-label">接口地址</label>
          <input id="js-api-base" class="ui-input ui-input--readonly" type="text" readonly />
        </div>
        <div>
          <label class="ui-label">发布平台</label>
          <select id="js-pack-id" class="ui-select"></select>
        </div>
        <div>
          <label class="ui-label">版本号</label>
          <select id="js-pack-version" class="ui-select"></select>
        </div>
      </div>
      <div id="js-status" class="ui-status ui-status--info"></div>
    </div>

    <div class="ui-card">
      <div class="ui-blocktitle">一、选择账号</div>
      <div class="ui-grid-2">
        <div>
          <label class="ui-label">用户名</label>
          <select id="js-owner-select" class="ui-select"></select>
        </div>
        <div>
          <label class="ui-label">账号</label>
          <select id="js-account-select" class="ui-select"></select>
        </div>
      </div>
    </div>

    <div class="ui-card">
      <div class="ui-blocktitle">二、选择角色</div>
      <div class="ui-grid-3">
        <div>
          <label class="ui-label">角色范围</label>
          <select id="js-preset-enabled-filter" class="ui-select">
            <option value="1" selected>仅有效角色</option>
            <option value="">全部角色（含淘汰）</option>
          </select>
          <div class="ui-hint">淘汰角色仅用于回看，不可保存。</div>
        </div>
        <div>
          <label class="ui-label">按级别筛选</label>
          <select id="js-stage-filter" class="ui-select">
            <option value="">全部级别</option>
            <option value="S0">S0</option>
            <option value="S1">S1</option>
            <option value="S2">S2</option>
            <option value="S3">S3</option>
          </select>
        </div>
        <div>
          <label class="ui-label">角色</label>
          <select id="js-preset-select" class="ui-select"></select>
        </div>
      </div>

      <!-- 仍保留只读信息（调试/未来扩展用） -->
      <div class="ui-sep ui-grid-3">
        <div><label class="ui-label">preset_id（只读）</label><input id="js-preset-id" class="ui-input ui-input--readonly" readonly /></div>
        <div><label class="ui-label">stage（只读）</label><input id="js-preset-stage" class="ui-input ui-input--readonly" readonly /></div>
        <div><label class="ui-label">enabled（只读）</label><input id="js-preset-enabled" class="ui-input ui-input--readonly" readonly /></div>
      </div>
    </div>

    <div class="ui-card">
      <div class="ui-blocktitle">三、表单填写</div>
      <div id="js-save-hint" class="ui-sub">请选择账号与角色后编辑。</div>

      <div class="ui-sep"></div>
      <div id="js-form-container"></div>

      <div class="ui-sep ui-row">
        <button id="js-save-btn" class="ui-btn ui-btn--primary" disabled>更新并保存新表单</button>
      </div>
    </div>

    <div class="ui-card">
      <div class="ui-blocktitle">脚本预览（不可修改）</div>
      <pre id="js-debug-prompt" class="ui-pre">-</pre>
    </div>

  </div>

  <script src="./form.js?v=form_v1"></script>
</body>
</html>
