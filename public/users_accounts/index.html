<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TrackLab 用户与账号创建平台</title>
  <link rel="stylesheet" href="/public/ui.css" />
</head>
<body>
  <div class="wrap">

    <!-- header -->
    <div class="card top">
      <h2>TrackLab 用户与账号创建平台</h2>
      <div class="muted">声明：本页仅用于创建用户（user）与账号（account）。角色（preset）创建/升级在其它页面进行。</div>
      <div class="muted" id="schemaHint"></div>
    </div>

    <!-- config -->
    <div class="card">
      <div class="row">
        <div>
          <label>接口地址</label>
          <input id="apiBase" class="input" value="https://tracklab-api.wuxiaofei1985.workers.dev" readonly />
        </div>
        <div>
          <label>发布平台</label>
          <select id="packId" class="select">
            <option value="xhs" selected>小红书</option>
          </select>
        </div>
        <div>
          <label>版本号</label>
          <select id="packVersion" class="select">
            <option value="v1.0.0" selected>v1.0.0</option>
          </select>
        </div>
      </div>
      <div id="status" class="status" style="margin-top:10px;"></div>
    </div>

    <!-- 1) create user -->
    <div class="card">
      <h2>一、创建用户（users）</h2>

      <div class="grid2">
        <div>
          <div class="label">用户名（username）</div>
          <input id="newUsername" class="input" placeholder="英文/数字/下划线/短横线，例如 alice_01" />
          <div class="hint">规则：2–32 位；仅允许 A–Z a–z 0–9 _ -</div>
        </div>
        <div>
          <div class="label">昵称（display_name）</div>
          <input id="newDisplayName" class="input" placeholder="可中文，例如 Alice / 小王" />
          <div class="hint">规则：必填；显示用，不参与唯一性。</div>
        </div>
      </div>

      <div style="margin-top:12px; display:flex; gap:12px; align-items:center;">
        <button id="btnCreateUser" class="btn">创建用户</button>
        <button id="btnReloadUsers" class="btn secondary">刷新用户列表</button>
      </div>
    </div>

    <!-- 2) create account -->
    <div class="card">
      <h2>二、创建账号（accounts）</h2>

      <div class="grid2">
        <div>
          <div class="label">选择用户</div>
          <select id="userSelect" class="select"></select>
          <div class="hint">未选择用户时，本区所有字段不可编辑。</div>
        </div>
        <div>
          <div class="label">账号标识（handle）</div>
          <input id="accountHandle" class="input" placeholder="例如 alice_xhs_01" />
          <div class="hint">建议同一 pack 下唯一；用于你在前端下拉选择账号。</div>
        </div>
      </div>

      <div class="grid2" style="margin-top:12px;">
        <div>
          <div class="label">pack_id</div>
          <select id="accountPackId" class="select"></select>
        </div>
        <div>
          <div class="label">pack_version</div>
          <select id="accountPackVersion" class="select"></select>
        </div>
      </div>

      <div style="margin-top:12px;">
        <div class="label">备注（note，可选）</div>
        <input id="accountNote" class="input" placeholder="例如 主账号 / 测试号" />
      </div>

      <div style="margin-top:12px; display:flex; gap:12px; align-items:center;">
        <button id="btnCreateAccount" class="btn">创建账号</button>
        <div class="hint" id="accountHint"></div>
      </div>
    </div>

  </div>

  <script src="./users_accounts.js?v=20260209"></script>
</body>
</html>
