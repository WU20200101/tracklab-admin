!doctype html
html lang=zh-CN
head
  meta charset=utf-8 
  meta name=viewport content=width=device-width,initial-scale=1 
  titleTrackLab Admintitle
  style
    root { font-family system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    body { margin 0; background#f6f7f9; color#111827; }
    .wrap { max-width 980px; margin 0 auto; padding 16px; }
    .card { background#fff; border1px solid #e5e7eb; border-radius 12px; padding 14px; margin-bottom 12px; }
    .row { displayflex; gap10px; flex-wrapwrap; }
    .row  div { flex 1 1 220px; }
    label { displayblock; font-size 12px; color#6b7280; margin-bottom 6px; }
    input, select, textarea, button {
      width 100%; box-sizing border-box;
      border1px solid #e5e7eb; border-radius 10px;
      padding 10px; font-size 14px; background #fff;
    }
    textarea { min-height 160px; font-family ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace; }
    button { cursorpointer; }
    button.primary { background#111827; color#fff; border-color#111827; }
    .muted { color#6b7280; font-size 12px; }
    .group { border-top 1px dashed #e5e7eb; padding-top 12px; margin-top 12px; }
    .field { margin-bottom 10px; }
    .checks { displayflex; gap10px; flex-wrapwrap; }
    .check { displayflex; align-itemscenter; gap6px; border1px solid #e5e7eb; border-radius 999px; padding 6px 10px; }
    .check input { widthauto; }
    pre { white-space pre-wrap; word-break break-word; background#0b1020; color#e5e7eb; padding 12px; border-radius 12px; overflowauto; }
    .error { color#b91c1c; font-size 13px; }
    .ok { color#065f46; font-size 13px; }
  style
head
body
  div class=wrap
    div class=card
      h2 style=margin0 0 8px 0;TrackLab Admin (MVP)h2
      div class=muted只做：加载 schema → 预览 prompt。所有拼装与规则在 R2，Admin 不拼 prompt、不做判断。div
    div

    div class=card
      div class=row
        div
          labelAPI Baselabel
          input id=apiBase placeholder=httpstracklab-api.xxx.workers.dev 
          div class=muted示例：httpstracklab-api.wuxiaofei1985.workers.devdiv
        div
        div
          labelPack IDlabel
          input id=packId value=xhs 
        div
        div
          labelPack Versionlabel
          input id=packVer value=v1.0.0 
        div
        div
          labelStagelabel
          select id=stage
            option value=S0S0option
            option value=S1S1option
            option value=S2S2option
            option value=S3S3option
          select
        div
      div

      div style=displayflex; gap10px; margin-top12px; flex-wrapwrap;
        button id=btnLoad class=primary style=widthauto; padding10px 14px;加载 Schemabutton
        button id=btnPreview style=widthauto; padding10px 14px;预览 Promptbutton
      div

      div id=status style=margin-top10px;div
    div

    div class=card
      h3 style=margin0 0 8px 0;表单h3
      div id=formHost class=muted先点击“加载 Schema”div
    div

    div class=card
      h3 style=margin0 0 8px 0;Preview 返回h3
      div class=muted若被 Gate 拦截，会显示 blocked + reasons。div
      pre id=previewOut(empty)pre
    div

  div

  script src=.admin.jsscript
body
html
